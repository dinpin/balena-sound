# Minimal WirePlumber configuration for balena-sound
# Using simplified configuration compatible with Alpine's WirePlumber

context.properties = {
    log.level = 2
    support.dbus = false
}

context.spa-libs = {
    audio.convert.* = audioconvert/libspa-audioconvert
    api.alsa.* = alsa/libspa-alsa
    support.* = support/libspa-support
}

context.modules = [
    { name = libpipewire-module-protocol-native }
    { name = libpipewire-module-client-node }
    { name = libpipewire-module-client-device }
    { name = libpipewire-module-adapter }
    { name = libpipewire-module-metadata }
    { name = libpipewire-module-session-manager }
]

wireplumber.profiles = {
    main = {
        monitor.alsa.properties = {
            alsa.use-acp = false
        }
    }
}
